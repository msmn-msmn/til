# â˜…ActiveRecordã®ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã«ã¤ã„ã¦
## ğŸ§©æ¦‚è¦
ActiveRecordã®ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒ¼ãƒ³ã®ã‚„ã‚Šæ–¹ã‚’å¿˜ã‚ŒãŸã¨ãã®å‚™å¿˜éŒ²


## âœ…ãƒ†ãƒ¼ãƒ–ãƒ«ã®çµåˆ
```
+---------+       1       *        +----------+      1       *         +-----------+
| Users   |------------------------| Orders   |------------------------| Payments  |
|---------|                        |----------|                        |-----------|
| id PK   |                        | id PK    |                        | id PK     |
| name    |                        | user_id FK |                      | order_id FK |
+---------+                        +----------+    1                   +-----------+
                                         |
+----------+       1       *        +------------+ *
| Products |------------------------| OrderItems |
|----------|                        |------------|
| id PK    |                        | id PK      |
| name     |                        | order_id FK|
| price    |                        | product_id FK |
+----------+                        +------------+


Users â€”< Ordersï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆ1ï¼‰ã«å¯¾ã—ã¦æ³¨æ–‡ï¼ˆå¤šï¼‰ãŒç´ã¥ã 1å¯¾å¤šã€‚
Orders â€”< Paymentsï¼šæ³¨æ–‡ï¼ˆ1ï¼‰ã«å¯¾ã—ã¦è¤‡æ•°ã®æ”¯æ‰•ã„ï¼ˆå¤šï¼‰ãŒå¯èƒ½ãª 1å¯¾å¤šã€‚
Orders â€”< OrderItems >â€” Productsï¼šæ³¨æ–‡ã¨å•†å“ã¯ å¤šå¯¾å¤š ã®é–¢ä¿‚ã§ã€OrderItems ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’é€šã˜ã¦ã¤ãªãŒã‚‹
```
ã¨ã„ã†ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ãŒã‚ã‚‹ã¨ã—ã¦<br>

### ãƒ»åŸºæœ¬çš„ãªçµåˆ
```
Users.joins(:orders).where(order: id = 2)
```
ã¨ã™ã‚‹ã“ã¨ã§æ³¨æ–‡IDãŒ2ã«å¯¾å¿œã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚


### ãƒ»ãƒã‚¹ãƒˆã—ãŸçµåˆ
```
Users.joins(orders: {orderitems: :products}).where(products: name = toy)
```
