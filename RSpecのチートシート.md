# ★RSpecのコード集
## ❇️テストのグループ化

## ***describe***
　describeブロックは、テスト対象のクラスやメソッドなどのグループを定義します。<br>
　テストコード内で複数のdescribeブロックを作成することができ、階層構造を持たせることもできます。<br>
　下記のようにコードを書きます。<br>
```
        describe "クラス名やメソッドの処理内容などを記載する" do
          ...
        end

```
　describeブロック内には、そのクラスやメソッドに関連する複数のテストケースを含めることができます。<br>

## ***context***
　contextブロックは、特定の状況や条件に基づいてテストをグループ化するために使用されます。<br>
　describeブロックの内部に記述されることが一般的です。<br>
　下記のようにコードを書きます。<br>
```
        describe "クラス名やメソッドの処理内容などを記載する" do
          context "状況や条件などを記載する" do
            ...
          end
        end
```
　contextブロックを使うことで、テストの可読性が向上し、どのような状況や条件でテストを行っているのかが明確になります。<br>

## ***it***
　itブロックは、特定のテストケースを定義し、1つのitブロックは1つのテストケースを表します。<br>
　下記のようにコードを書きます。<br>
 ```
        describe "クラス名やメソッドの処理内容などを記載する" do
          context "状況や条件などを記載する" do
            it "テストケースの説明" do
              ...
            end
          end
        end
```
　itブロック内には、テストの実行や結果の検証が記述されます。<br>

## ❇️検証メソッド
　値を検証するためのexpectメソッドは基本的な構文は下記のようになります。<br>
```
        expect(テスト対象の値).to マッチャー(期待する値)
```

## ❇️マッチャー
　RSpecのマッチャーは、テストコード内で期待される値と実際の値を比較し、テスト結果を判定するために使用されます。<br>


## ***eq***
　eqマッチャーは、2つの値が等しいかどうかを比較します。<br>
```
        expect(テスト対象の値).to eq(期待する値)
```
　modelに記載した処理による実際の値と期待する値を比較して、等しい場合にテストが成功します。<br>

## ***be***
　beマッチャーは、真偽値のtrue/falseやオブジェクトが特定の条件を満たすかどうかを判定します。<br>
```
        expect(テスト対象の値).to be true # be true : 値がtrueであるかどうかをチェックします
        expect(テスト対象の値).to be false # be false : 値がfalseであるかどうかをチェックします
        expect(テスト対象の値).to be_nil # be_nil : 値がnilであるかどうかをチェックします
```

## ***be_empty***
　be_emptyマッチャーは、配列や文字列、ハッシュなどが空であるかどうかを検証します。<br>
```
        expect(テスト対象の配列).to be_empty
        expect(テスト対象の文字列).to be_empty
        expect(テスト対象のハッシュ).to be_empty
```
　配列が空の場合や、文字列が空の場合、ハッシュが空の場合にテストが成功します。<br>
　要素や文字列、キーと値のペアが存在しない状態を表します。<br>

## ***be_valid***
　be_validマッチャーは、オブジェクトがバリデーションに通るかどうかを検証します。<br>
　主にActive Recordモデルのテストで使用されます。<br>
```
        expect(テスト対象のオブジェクト).to be_valid
```
　オブジェクトがバリデーションに通ってる場合にテストが成功します。<br>

　be_emptyと組み合わせて、エラーメッセージの格納する配列が空であることも追加でテストとして記載するとより正確なテストを書くことができます。<br>
```
        expect(テスト対象のオブジェクト).to be_valid
        expect(テスト対象のオブジェクトのエラーの配列).to be_empty
```

## ***be_invalid***
　be_invalidマッチャーは、be_validの逆でオブジェクトがバリデーションに通らない状態であることを検証するために使用されます。<br>
```
        expect(object).to be_invalid
```
　objectがバリデーションに合格しない場合にテストが成功します。<br>
　オブジェクトの属性値が必要なバリデーションルールを満たしていないので、エラーが発生している状態です。<br>
